<div id="header" class="header"><div onclick="toggleMenu()" style="height: 44px; width: 70px;text-align: left; padding-left: 10px; padding-top: 10px;position: fixed;"><img src="img/menu_icon.png" width="24px"/></div><h1>Discussion</h1></div>
<div id="drawer-menu" class="menu-hidden">
	<ul class="list">
		<li><a onclick="History.back()"><img class="menu-icon" src="img/main_icon.png"/><strong><div class="menu-text">Main</div></strong></a></li>
		<li><a onclick="go('discussion.html', null, true)"><img class="menu-icon" src="img/discussion_icon.png"/><strong><div class="menu-text">Discussion</div></strong></a></li>
		<li><a onclick="go('game_instructions.html', null, true)"><img class="menu-icon" src="img/game_icon.png"/><strong><div class="menu-text">Game</div></strong></a></li>
		<li><a onclick="go('achievements.html', null, true)"><img class="menu-icon" src="img/achievements_icon.png"/><strong><div class="menu-text">Achievements</div></strong></a></li>
		<li><a onclick="toggleMenu()"><img class="menu-icon" src="img/settings_icon.png"/><strong><div class="menu-text">Close Menu</div></strong></a></li>
	</ul>
</div>
<div id="discussion-button-container"><button class="discussion-ask-question left" onclick="go('new_question.html')">New Question</button><button class="discussion-ask-question right" onclick="go('new_tip.html')">New Tip</button></div>
<div id="discussion-scroller" class="scroller">
	<ul id="discussion-list" class="list"></ul>
</div>

<script>
var discussions;
get("discussion.php", null, function(d) {
	discussions = d.discussions;
	for (var i = 0; i < discussions.length; i++) {
		var discussion = discussions[i];
		
		var type;
		switch (discussion.type) {
		case 1:
			type = "question";
			break;
		case 2:
			type = "answered";
			break;
		case 3:
			type = "tip";
			break;
		}
		
		var date = new Date(discussion.timestamp * 1000).toLocaleDateString();
		
		$("#discussion-list").append('<li><a onclick="go(\'post.html\', discussions[' + i + '])">'
				+ '<img src="img/discussion_' + type + '.png" class="discussion-icon"/>'
				+ '<strong>' + discussion.title + '</strong>'
				+ '<span class="discussion-date">' + date + '</span></a></li>');
	}
}, function () {
	alert("You must be online to see new discussions.");
});
</script>
